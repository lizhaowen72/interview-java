### 深入浅出索引
#### 1.什么是索引?
> 索引的出现其实就是为了提高数据查询的效率,就像书的目录一样

#### 2.索引的常见模型
> 三种模型:哈希表 有序数组 搜索树  
> 哈希表是一种以键-值存储数据的结构,优点:增加数据的速度很快,只需要往后追加.但缺点是,因为不是有序的,所以哈希表做区间查询的速度是很慢的
> 哈希表这种结构适用于只有等值查询的场景
>
> 有序数组在等值查询和范围查询场景中的性能都非常好,使用二分法,时间复杂度O(logN)
> 缺点是往中间插入一条记录就必须得挪动后面所有的记录,成本太高
> 有序数组索引只适用于静态存储引擎.也就是表中的数据不会发生变动的场景
>
> 二叉搜索树的特点是每个节点的左二子小于父节点,父节点小于右儿子

#### 3.InnoDB的索引模型
> 在InnoDB中,表都是根据主键顺序以索引的形式存放的,这种存储方式的表称为索引组织表,InnoDB使用了B+树索引模型,索引数据都是存储在B+树中的.
>
> 根据叶子节点的内容,索引类型分为主键索引和非主键索引
> 主键索引的叶子节点存的是整行数据.在InnoDB里,主键索引也被称为聚簇索引
> 非主键索引的叶子节点存储的内容是主键的值.在InnoDB里,非主键索引也被称为二级索引

##### 3.1基于主键索引和普通索引的查询有什么区别?
> 基于非主键索引的查询需要多扫描一颗索引树,回表

#### 4.索引维护
> 1.为什么要求建表语句里一定要有自增主键?
> 每次插入一条新纪录,都是追加操作,都不涉及到挪动其他记录,也不会触发叶子节点的分裂.
> 除了考虑性能外,还可以从存储空间的角度来看.假设我们的表中确实有一个唯一字段,比如字符串类型的身份证号,那应该用身份证号做主键还是用自增主键做主键呢?
> 由于每个非主键索引的叶子节点上都是主键的值.如果是用身份证号做主键,那么每个二级索引的叶子节点占用约20个字节,而如果用整型做主键,则只需要4个字节,如果是长整形则是8个字节
> 显然主键长度越小,普通索引的叶子节点就越小,普通索引占用的空间也就越小
> 所以,从性能和存储空间方面考量,自增主键往往是更合理的选择

#### 5.思考题
>对于上面例子中的 InnoDB 表 T，如果你要重建索引 k，你的两个 SQL 语句可以这么写：  
> alter table T drop index k;  
> alter table T add index(k);  
> 如果你要重建主键索引，也可以这么写：  
> alter table T drop primary key;  
> alter table T add primary key(id);  
> 我的问题是，对于上面这两个重建索引的作法，说出你的理解。如果有不合适的，为什么，更好的方法是什么？
